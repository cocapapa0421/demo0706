.grid {
  @include flex(flex, wrap);
  margin-right: -#{$grid-gutter-small / 2};
  margin-left: -#{$grid-gutter-small / 2};

  > * {
    padding-right: $grid-gutter-small / 2;
    padding-left: $grid-gutter-small / 2;
    // flex-grow: 1;
  }

  @include media(">=sm") {
    margin-right: -#{$grid-gutter / 2};
    margin-left: -#{$grid-gutter / 2};

    > * {
      padding-right: $grid-gutter / 2;
      padding-left: $grid-gutter / 2;
    }
  }

  @include media(">=xl") {
    margin-right: -#{$grid-gutter-medium / 2};
    margin-left: -#{$grid-gutter-medium / 2};

    > * {
      padding-right: $grid-gutter-medium / 2;
      padding-left: $grid-gutter-medium / 2;
    }
  }
}

.grid + .grid {
  margin-top: rem(10);

  @include media(">=sm") {
    margin-top: rem(15);
  }

  @include media(">=xl") {
    margin-top: rem(20);
  }
}

.grid--small {
  @include media(">=xl") {
    margin-right: -#{($grid-gutter-medium - 5px) / 2};
    margin-left: -#{($grid-gutter-medium - 5px) / 2};

    > * {
      padding-right: ($grid-gutter-medium - 5px) / 2;
      padding-left: ($grid-gutter-medium - 5px) / 2;
    }
  }
}

.grid--medium {
  @include media(">=xl") {
    margin-right: -#{($grid-gutter-medium + 5px) / 2};
    margin-left: -#{($grid-gutter-medium + 5px) / 2};

    > * {
      padding-right: ($grid-gutter-medium + 5px) / 2;
      padding-left: ($grid-gutter-medium + 5px) / 2;
    }
  }
}

.grid--huge {
  @include media(">=xl") {
    margin-right: -#{($grid-gutter-medium + 10px) / 2};
    margin-left: -#{($grid-gutter-medium + 10px) / 2};

    > * {
      padding-right: ($grid-gutter-medium + 10px) / 2;
      padding-left: ($grid-gutter-medium + 10px) / 2;
    }
  }
}

.col {
  @include columns-loop($grid-cols);

  &-1:nth-of-type(n + 13),
  &-2:nth-of-type(n + 7),
  &-3:nth-of-type(n + 5),
  &-4:nth-of-type(n + 4),
  &-6:nth-of-type(n + 3),
  &-12:nth-of-type(n + 2) {
    margin-top: $grid-gutter-small;
  }

  @include media("<sm") {
    &-xs-1:nth-of-type(n + 13),
    &-xs-2:nth-of-type(n + 7),
    &-xs-3:nth-of-type(n + 5),
    &-xs-4:nth-of-type(n + 4),
    &-xs-6:nth-of-type(n + 3),
    &-xs-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter-small;
    }
  }

  @include media(">=sm", "<lg") {
    &-sm-1:nth-of-type(n + 13),
    &-sm-2:nth-of-type(n + 7),
    &-sm-3:nth-of-type(n + 5),
    &-sm-4:nth-of-type(n + 4),
    &-sm-6:nth-of-type(n + 3),
    &-sm-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter;
    }
  }

  @include media(">=lg", "<xl") {
    &-lg-1:nth-of-type(n + 13),
    &-lg-2:nth-of-type(n + 7),
    &-lg-3:nth-of-type(n + 5),
    &-lg-4:nth-of-type(n + 4),
    &-lg-6:nth-of-type(n + 3),
    &-lg-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter;
    }
  }

  @include media(">=xl") {
    &-lg-1:nth-of-type(n + 13),
    &-lg-2:nth-of-type(n + 7),
    &-lg-3:nth-of-type(n + 5),
    &-lg-4:nth-of-type(n + 4),
    &-lg-6:nth-of-type(n + 3),
    &-lg-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter-medium;
    }
  }

  @include media(">=xl") {
    &-xl-1:nth-of-type(n + 13),
    &-xl-2:nth-of-type(n + 7),
    &-xl-3:nth-of-type(n + 5),
    &-xl-4:nth-of-type(n + 4),
    &-xl-6:nth-of-type(n + 3),
    &-xl-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter-huge;
    }
  }
}

.grid--small > .col {
  @include media(">=xl") {
    &-lg-1:nth-of-type(n + 13),
    &-lg-2:nth-of-type(n + 7),
    &-lg-3:nth-of-type(n + 5),
    &-lg-4:nth-of-type(n + 4),
    &-lg-6:nth-of-type(n + 3),
    &-lg-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter-medium - 5px;
    }
  }
}

.grid--medium > .col {
  @include media(">=xl") {
    &-lg-1:nth-of-type(n + 13),
    &-lg-2:nth-of-type(n + 7),
    &-lg-3:nth-of-type(n + 5),
    &-lg-4:nth-of-type(n + 4),
    &-lg-6:nth-of-type(n + 3),
    &-lg-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter-medium + 5px;
    }
  }
}

.grid--huge > .col {
  @include media(">=xl") {
    &-lg-1:nth-of-type(n + 13),
    &-lg-2:nth-of-type(n + 7),
    &-lg-3:nth-of-type(n + 5),
    &-lg-4:nth-of-type(n + 4),
    &-lg-6:nth-of-type(n + 3),
    &-lg-12:nth-of-type(n + 2) {
      margin-top: $grid-gutter-medium + 10px;
    }
  }
}

.grid--counter {
  counter-reset: reset;
}

.grid--counter > * {
  counter-increment: post-order;
}
